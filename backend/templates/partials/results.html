<div>
    <h2>Comparison Results</h2>
    <div id="results-table"></div>
</div>
<script>
    (() => {
        let tableData = {{ results|safe }};
        new Tabulator("#results-table", {
            data: tableData,
            layout: "fitColumns",
            initialSort: [
                { column: "jaccard", dir: "desc" },
            ],
            columns: [
                {
                    title: "Dataset",
                    field: "dataset",
                    formatter: (cell) => {
                        let datasetName = cell.getValue();
                        return `<a href="{{ url_for('download_dataset', dataset='` + datasetName + `') }}" target="_blank">${datasetName}</a>`;
                    },
                },
                { title: "Jaccard", field: "jaccard", sorter: "number" },
                { title: "Intersection", field: "intersection", sorter: "number" },
                { title: "Union", field: "union", sorter: "number" },
                { title: "N of Intersections", field: "n_intersections", sorter: "number" },
            ],
        });
    })();
</script>
